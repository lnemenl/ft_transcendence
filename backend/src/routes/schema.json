{
  "loginSchema": {
    "tags": ["Auth"],
    "body": {
      "type": "object",
      "required": ["password"],
      "properties": {
        "email": { "type": "string", "format": "email" },
        "username": { "type": "string" },
        "password": { "type": "string" }
      }
    },
    "response": {
      "200": {
        "oneOf": [
          {
            "type": "object",
            "properties": {
              "id": { "type": "string" },
              "username": { "type": "string" },
              "avatarUrl": { "type": ["string", "null"], "format": "uri" },
              "accessToken": { "type": "string" }
            },
            "required": ["id", "username", "avatarUrl"]
          },
          {
            "type": "object",
            "properties": {
              "twoFactorRequired": { "type": "boolean" },
              "twoFactorToken": { "type": "string" }
            },
            "required": ["twoFactorRequired", "twoFactorToken"]
          }
        ]
      },
      "401": { "type": "object", "properties": { "error": { "type": "string" } } }
    }
  },

  "logoutSchema": {
    "tags": ["Auth"],
    "response": {
      "200": { "type": "object", "properties": { "ok": { "type": "boolean" } } }
    }
  },

  "registerSchema": {
    "description": "Register a new user",
    "tags": ["Auth"],
    "body": {
      "type": "object",
      "required": ["email", "password", "username"],
      "properties": {
        "email": { "type": "string", "format": "email" },
        "password": { "type": "string", "minLength": 8 },
        "username": { "type": "string", "minLength": 2 }
      }
    },
    "response": {
      "201": {
        "type": "object",
        "properties": {
          "id": { "type": "string" },
          "email": { "type": "string", "format": "email" },
          "username": { "type": "string" }
        }
      },
      "400": { "type": "object", "properties": { "error": { "type": "string" } } }
    }
  },

  "getMeSchema": {
    "description": "Return the currently authenticated user's profile",
    "tags": ["User"],
    "response": {
      "200": {
        "type": "object",
        "properties": {
          "id": { "type": "string" },
          "email": { "type": "string", "format": "email" },
          "username": { "type": "string" },
          "avatarUrl": { "type": ["string", "null"], "format": "uri" },
          "isTwoFactorEnabled": { "type": "boolean" },
          "createdAt": { "type": "string", "format": "date-time" },
          "friends": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "id": { "type": "string" },
                "username": { "type": "string" },
                "avatarUrl": { "type": ["string", "null"], "format": "uri" },
                "isOnline": { "type": "boolean" }
              }
            }
          }
        }
      },
      "401": { "type": "object", "properties": { "error": { "type": "string" } } },
      "404": { "type": "object", "properties": { "error": { "type": "string" } } },
      "500": { "type": "object", "properties": { "error": { "type": "string" } } }
    }
  },

  "getAllUsersSchema": {
    "description": "Fetch a public user profiles",
    "tags": ["User"],
    "response": {
      "200": {
        "type": "array",
        "items": {
          "type": "object",
          "properties": {
            "id": { "type": "string" },
            "username": { "type": "string" },
            "avatarUrl": { "type": ["string", "null"], "format": "uri" }
          }
        }
      },
      "500": { "type": "object", "properties": { "error": { "type": "string" } } }
    }
  },

  "getUserSchema": {
    "description": "Fetch a public user profile by ID",
    "tags": ["User"],
    "params": {
      "type": "object",
      "properties": {
        "id": { "type": "string" }
      },
      "required": ["id"]
    },
    "response": {
      "200": {
        "type": "object",
        "properties": {
          "id": { "type": "string" },
          "username": { "type": "string" },
          "avatarUrl": { "type": ["string", "null"], "format": "uri" }
        }
      },
      "401": { "type": "object", "properties": { "error": { "type": "string" } } },
      "404": { "type": "object", "properties": { "error": { "type": "string" } } },
      "500": { "type": "object", "properties": { "error": { "type": "string" } } }
    }
  },

  "updateUserSchema": {
    "description": "Update the currently authenticated user's profile",
    "tags": ["User"],
    "body": {
      "type": "object",
      "properties": {
        "username": { "type": "string", "minLength": 2 },
        "avatarUrl": { "type": "string", "format": "uri" }
      },
      "minProperties": 1
    },
    "response": {
      "200": {
        "type": "object",
        "properties": {
          "id": { "type": "string" },
          "email": { "type": "string", "format": "email" },
          "username": { "type": "string" },
          "avatarUrl": { "type": ["string", "null"], "format": "uri" }
        }
      },
      "401": { "type": "object", "properties": { "error": { "type": "string" } } },
      "404": { "type": "object", "properties": { "error": { "type": "string" } } },
      "500": { "type": "object", "properties": { "error": { "type": "string" } } }
    }
  },

  "newFriendRequest": {
    "description": "Send a friend request to another user",
    "tags": ["FriendRequest"],
    "params": {
      "type": "object",
      "properties": {
        "id": { "type": "string" }
      },
      "required": ["id"]
    },
    "response": {
      "201": {
        "type": "object",
        "properties": {
          "id": { "type": "string" },
          "receiver": {
            "type": "object",
            "properties": {
              "id": { "type": "string" },
              "username": { "type": "string" },
              "avatarUrl": { "type": ["string", "null"], "format": "uri" }
            }
          }
        }
      },
      "400": { "type": "object", "properties": { "error": { "type": "string" } } },
      "404": { "type": "object", "properties": { "error": { "type": "string" } } },
      "500": { "type": "object", "properties": { "error": { "type": "string" } } }
    }
  },

  "getFriendRequests": {
    "description": "Get my friend requests",
    "tags": ["FriendRequest"],
    "response": {
      "200": {
        "type": "object",
        "properties": {
          "sentFriendRequests": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "id": { "type": "string" },
                "receiver": {
                  "type": "object",
                  "properties": {
                    "id": { "type": "string" },
                    "username": { "type": "string" },
                    "avatarUrl": { "type": ["string", "null"], "format": "uri" }
                  }
                }
              }
            }
          },
          "receivedFriendRequests": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "id": { "type": "string" },
                "sender": {
                  "type": "object",
                  "properties": {
                    "id": { "type": "string" },
                    "username": { "type": "string" },
                    "avatarUrl": { "type": ["string", "null"], "format": "uri" }
                  }
                }
              }
            }
          }
        }
      },
      "404": { "type": "object", "properties": { "error": { "type": "string" } } },
      "500": { "type": "object", "properties": { "error": { "type": "string" } } }
    }
  },

  "acceptFriendRequest": {
    "description": "Accept a friend request",
    "tags": ["FriendRequest"],
    "params": {
      "type": "object",
      "properties": {
        "id": { "type": "string" }
      },
      "required": ["id"]
    },
    "response": {
      "200": {
        "type": "object",
        "properties": {
          "id": { "type": "string" },
          "username": { "type": "string" },
          "avatarUrl": { "type": ["string", "null"], "format": "uri" }
        }
      },
      "400": { "type": "object", "properties": { "error": { "type": "string" } } },
      "404": { "type": "object", "properties": { "error": { "type": "string" } } },
      "500": { "type": "object", "properties": { "error": { "type": "string" } } }
    }
  },

  "declineFriendRequest": {
    "description": "Decline a friend request",
    "tags": ["FriendRequest"],
    "params": {
      "type": "object",
      "properties": {
        "id": { "type": "string" }
      },
      "required": ["id"]
    },
    "response": {
      "200": { "type": "object", "properties": { "ok": { "type": "boolean" } } },
      "404": { "type": "object", "properties": { "error": { "type": "string" } } },
      "500": { "type": "object", "properties": { "error": { "type": "string" } } }
    }
  },

  "newGame": {
    "description": "Create a new game",
    "tags": ["Game"],
    "body": {
      "type": "object",
      "required": ["winner"],
      "properties": {
        "winner": { "type": "number" }
      }
    },
    "response": {
      "201": {
        "description": "Game created successfully",
        "type": "object",
        "properties": {
          "id": { "type": "string" },
          "winner": {
            "type": "object",
            "properties": {
              "id": { "type": "string" },
              "username": { "type": "string" },
              "avatarUrl": { "type": [ "string", "null" ], "format": "uri" }
            }
          },
          "players": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "id": { "type": "string" },
                "username": { "type": "string" },
                "avatarUrl": { "type": [ "string", "null" ], "format": "uri" }
              }
            }
          },
          "createdAt": { "type": "string", "format": "date-time" }
        }
      },
      "400": {
        "description": "Bad request, e.g., player not found",
        "type": "object",
        "properties": {
          "error": { "type": "string" }
        }
      },
      "500": {
        "description": "Database error",
        "type": "object",
        "properties": {
          "error": { "type": "string" }
        }
      }
    }
  },

  "getGames": {
    "description": "Get all games",
    "tags": ["Game"],
    "response": {
      "200": {
        "description": "Games found successfully",
        "type": "array",
        "items": {
          "type": "object",
          "properties": {
            "id": { "type": "string" },
            "winner": {
              "type": "object",
              "properties": {
                "id": { "type": "string" },
                "username": { "type": "string" },
                "avatarUrl": {
                  "type": ["string", "null"],
                  "format": "uri"
                }
              }
            },
            "players": {
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "id": { "type": "string" },
                  "username": { "type": "string" },
                  "avatarUrl": {
                    "type": ["string", "null"],
                    "format": "uri"
                  }
                }
              }
            },
            "createdAt": { "type": "string", "format": "date-time" }
          }
        }
      },
      "404": {
        "description": "User not found",
        "type": "object",
        "properties": {
          "error": { "type": "string" }
        }
      },
      "500": {
        "description": "Internal server error",
        "type": "object",
        "properties": {
          "error": { "type": "string" }
        }
      }
    }
  },

  "getGameById": {
    "description": "Get game by id",
    "tags": ["Game"],
    "response": {
      "200": {
        "description": "Game found successfully",
        "type": "object",
        "properties": { 
          "id": { "type": "string" },
          "winner": {
            "type": "object",
            "properties": {
              "id": { "type": "string" },
              "username": { "type": "string" },
              "avatarUrl": {
                "type": [ "string", "null" ],
                "format": "uri"
              }
            }
          },
          "players": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "id": { "type": "string" },
                "username": { "type": "string" },
                "avatarUrl": {
                  "type": [ "string", "null" ],
                  "format": "uri"
                }
              }
            }
          },
          "createdAt": { "type": "string", "format": "date-time" }
        }
      },
      "400": {
        "description": "Invalid id",
        "type": "object",
        "properties": {
          "error": { "type": "string" }
        }
      },
      "500": {
        "description": "Invalid id",
        "type": "object",
        "properties": {
          "error": { "type": "string" }
        }
      }
    }
  },
  
  "createTournament": {
    "description": "Create a tournament",
    "tags": ["Tournament"],
    "body": {
      "type": "object",
      "required": ["participants"],
      "properties": {
        "participants": {
          "type": "array",
          "items": { "type": "string" }
        }
      }
    },
    "response": {
      "201": {
        "description": "Tournament created successfully",
        "type": "object",
        "properties": {
          "tournamentId": { "type": "string" }
        }
      },
      "400": {
        "description": "Bad request, e.g., player not found",
        "type": "object",
        "properties": {
          "error": { "type": "string" }
        }
      },
      "401": {
        "description": "Unauthorized",
        "type": "object",
        "properties": {
          "error": { "type": "string" }
        }
      },
      "500": {
        "description": "Internal server error",
        "type": "object",
        "properties": {
          "error": { "type": "string" }
        }
      }
    }
  },

  "newTournamentGame": {
    "description": "Create a new game as part of a tournament",
    "tags": ["Tournament"],
    "body": {
      "type": "object",
      "required": ["winner", "players", "tournamentId"],
      "properties": {
        "winner": { "type": "number" },
        "players": {
          "type": "array",
          "items": { "type": "string" }
        },
        "tournamentId": { "type": "string" }
      }
    },
    "response": {
      "201": {
        "description": "Game created successfully",
        "type": "object",
        "properties": {
          "id": { "type": "string" },
          "winner": {
            "type": "object",
            "properties": {
              "id": { "type": "string" },
              "username": { "type": "string" },
              "avatarUrl": { "type": [ "string", "null" ], "format": "uri" }
            }
          },
          "players": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "id": { "type": "string" },
                "username": { "type": "string" },
                "avatarUrl": { "type": [ "string", "null" ], "format": "uri" }
              }
            }
          },
          "createdAt": { "type": "string", "format": "date-time" }
        }
      },
      "400": {
        "description": "Bad request, e.g., player not found",
        "type": "object",
        "properties": {
          "error": { "type": "string" }
        }
      },
      "500": {
        "description": "Database error",
        "type": "object",
        "properties": {
          "error": { "type": "string" }
        }
      }
    }
  },

  "getTournamentById": {
    "description": "Get tournament by id",
    "tags": ["Tournament"],
    "response": {
      "200": {
        "description": "Tournament found successfully",
        "type": "object",
        "properties": { 
          "id": { "type": "string" },
          "winner": {
            "type": ["object", "null"],
            "properties": {
              "id": { "type": "string" },
              "username": { "type": "string" },
              "avatarUrl": {
                "type": [ "string", "null" ],
                "format": "uri"
              }
            }
          },
          "participants": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "id": { "type": "string" },
                "username": { "type": "string" },
                "avatarUrl": {
                  "type": [ "string", "null" ],
                  "format": "uri"
                }
              }
            }
          },
          "games": {
            "type": "array",
            "items": {
              "type": ["object", "null"],
              "properties": { 
                "id": { "type": "string" },
                "winner": {
                  "type": "object",
                  "properties": {
                    "id": { "type": "string" },
                    "username": { "type": "string" },
                    "avatarUrl": {
                      "type": [ "string", "null" ],
                      "format": "uri"
                    }
                  }
                },
                "players": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "id": { "type": "string" },
                      "username": { "type": "string" },
                      "avatarUrl": {
                        "type": [ "string", "null" ],
                        "format": "uri"
                      }
                    }
                  }
                },
                "createdAt": { "type": "string", "format": "date-time" }
              }
            }
          },
          "startDate": { "type": "string", "format": "date-time" },
          "endDate": { "type": ["string", "null"], "format": "date-time" }
        }
      },
      "400": {
        "description": "Invalid id",
        "type": "object",
        "properties": {
          "error": { "type": "string" }
        }
      },
      "500": {
        "description": "Internal server error",
        "type": "object",
        "properties": {
          "error": { "type": "string" }
        }
      }
    }
  },

  "updateTournamentById": {
    "description": "Update tournament data",
    "tags": ["Tournament"],
    "body": {
      "type": "object",
      "required": ["winner"],
      "properties": {
        "winner": { "type": "string" }
      }
    },
    "response": {
      "200": {
        "description": "Tournament data updated successfully",
        "type": "object",
        "properties": { 
          "id": { "type": "string" },
          "winner": {
            "type": ["object", "null"],
            "properties": {
              "id": { "type": "string" },
              "username": { "type": "string" },
              "avatarUrl": {
                "type": [ "string", "null" ],
                "format": "uri"
              }
            }
          },
          "participants": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "id": { "type": "string" },
                "username": { "type": "string" },
                "avatarUrl": {
                  "type": [ "string", "null" ],
                  "format": "uri"
                }
              }
            }
          },
          "games": {
            "type": "array",
            "items": {
              "type": ["object", "null"],
              "properties": { 
                "id": { "type": "string" },
                "winner": {
                  "type": "object",
                  "properties": {
                    "id": { "type": "string" },
                    "username": { "type": "string" },
                    "avatarUrl": {
                      "type": [ "string", "null" ],
                      "format": "uri"
                    }
                  }
                },
                "players": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "id": { "type": "string" },
                      "username": { "type": "string" },
                      "avatarUrl": {
                        "type": [ "string", "null" ],
                        "format": "uri"
                      }
                    }
                  }
                },
                "createdAt": { "type": "string", "format": "date-time" }
              }
            }
          },
          "startDate": { "type": "string", "format": "date-time" },
          "endDate": { "type": ["string", "null"], "format": "date-time" }
        }
      },
      "404": {
        "description": "Bad request, e.g., player not found",
        "type": "object",
        "properties": {
          "error": { "type": "string" }
        }
      },
      "500": {
        "description": "Internal server error",
        "type": "object",
        "properties": {
          "error": { "type": "string" }
        }
      }
    }
  },

  "twoFAGenerateSchema": {
    "tags": ["2FA"],
    "response": {
      "200": {
        "type": "object",
        "properties": {
          "secret": { "type": "string" },
          "otpauthUrl": { "type": "string" },
          "qrCodeDataUrl": { "type": "string" }
        }
      },
      "404": { "type": "object", "properties": { "error": { "type": "string" } } },
      "500": { "type": "object", "properties": { "error": { "type": "string" } } }
    }
  },
  "twoFAEnableSchema": {
    "tags": ["2FA"],
    "body": {
      "type": "object",
      "required": ["SixDigitCode"],
      "properties": {
        "SixDigitCode": { "type": "string", "pattern": "^[0-9]{6}$" }
      }
    },
    "response": {
      "200": { "type": "object", "properties": { "enabled": { "type": "boolean" } } },
      "400": { "type": "object", "properties": { "error": { "type": "string" } } },
      "401": { "type": "object", "properties": { "error": { "type": "string" } } },
      "500": { "type": "object", "properties": { "error": { "type": "string" } } }
    }
  },
  "twoFAVerifySchema": {
    "tags": ["2FA"],
    "body": {
      "type": "object",
      "required": ["twoFactorToken", "SixDigitCode"],
      "properties": {
        "twoFactorToken": { "type": "string" },
        "SixDigitCode": { "type": "string", "pattern": "^[0-9]{6}$" }
      }
    },
    "response": {
      "200": { "type": "object", "properties": { "ok": { "type": "boolean" } } },
      "401": { "type": "object", "properties": { "error": { "type": "string" } } },
      "500": { "type": "object", "properties": { "error": { "type": "string" } } }
    }
  },
  "twoFAVerifyTournamentSchema": {
    "tags": ["2FA"],
    "body": {
      "type": "object",
      "required": ["twoFactorToken", "SixDigitCode"],
      "properties": {
        "twoFactorToken": { "type": "string" },
        "SixDigitCode": { "type": "string", "pattern": "^[0-9]{6}$" }
      }
    },
    "response": {
      "200": {
        "type": "object",
        "properties": {
          "id": { "type": "string" },
          "username": { "type": "string" },
          "avatarUrl": { "type": ["string", "null"], "format": "uri" }
        }
      },
      "401": { "type": "object", "properties": { "error": { "type": "string" } } },
      "500": { "type": "object", "properties": { "error": { "type": "string" } } }
    }
  },
  "twoFADisableSchema": {
    "tags": ["2FA"],
    "body": {
      "type": "object",
      "required": ["SixDigitCode"],
      "properties": {
        "SixDigitCode": { "type": "string", "pattern": "^[0-9]{6}$" }
      }
    },
    "response": {
      "200": { "type": "object", "properties": { "disabled": { "type": "boolean" } } },
      "400": { "type": "object", "properties": { "error": { "type": "string" } } },
      "401": { "type": "object", "properties": { "error": { "type": "string" } } }
    }
  },

  "googleInitSchema": {
    "description": "Initialize Google OAuth flow",
    "tags": ["Auth"],
    "querystring": {
      "type": "object",
      "properties": {
        "type": { "type": "string", "enum": ["main", "player2", "tournament"] }
      }
    }
  },

  "googleCallbackSchema": {
    "description": "Google OAuth callback handler",
    "tags": ["Auth"],
    "response": {
      "200": {
        "type": "object",
        "properties": {
          "id": { "type": "string" },
          "username": { "type": "string" },
          "email": { "type": "string", "format": "email" },
          "avatarUrl": { "type": ["string", "null"], "format": "uri" },
          "accessToken": { "type": "string" },
          "refreshToken": { "type": "string" }
        },
        "required": ["id", "username", "avatarUrl", "accessToken"]
      },
      "400": { "type": "object", "properties": { "error": { "type": "string" } } },
      "401": { "type": "object", "properties": { "error": { "type": "string" } } }
    }
  },

  "googleCallbackPlayer2Schema": {
    "description": "Google OAuth callback handler for player 2",
    "tags": ["Auth"],
    "response": {
      "200": {
        "type": "object",
        "properties": {
          "id": { "type": "string" },
          "username": { "type": "string" },
          "avatarUrl": { "type": ["string", "null"], "format": "uri" },
          "accessToken": { "type": "string" }
        },
        "required": ["id", "username", "avatarUrl", "accessToken"]
      },
      "400": { "type": "object", "properties": { "error": { "type": "string" } } },
      "401": { "type": "object", "properties": { "error": { "type": "string" } } }
    }
  },

  "googleCallbackTournamentSchema": {
    "description": "Google OAuth callback handler for tournament",
    "tags": ["Auth"],
    "response": {
      "200": {
        "type": "object",
        "properties": {
          "id": { "type": "string" },
          "username": { "type": "string" },
          "avatarUrl": { "type": ["string", "null"], "format": "uri" }
        },
        "required": ["id", "username", "avatarUrl"]
      },
      "400": { "type": "object", "properties": { "error": { "type": "string" } } },
      "401": { "type": "object", "properties": { "error": { "type": "string" } } }
    }
  }
}
