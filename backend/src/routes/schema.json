{
  "loginSchema": {
    "tags": ["Auth"],
    "body": {
      "type": "object",
      "required": ["password"],
      "properties": {
        "email": { "type": "string", "format": "email" },
        "username": { "type": "string" },
        "password": { "type": "string" }
      }
    },
    "response": {
      "200": {
        "type": "object",
        "properties": { "accessToken": { "type": "string" } }
      },
      "401": { "type": "object", "properties": { "error": { "type": "string" } } }
    }
  },
  "logoutSchema": {
    "tags": ["Auth"],
    "response": {
      "200": { "type": "object", "properties": { "ok": { "type": "boolean" } } }
    }
  },
  "registerSchema": {
    "description": "Register a new user",
    "tags": ["Auth"],
    "body": {
      "type": "object",
      "required": ["email", "password", "username"],
      "properties": {
        "email": { "type": "string", "format": "email" },
        "password": { "type": "string", "minLength": 8 },
        "username": { "type": "string", "minLength": 2 }
      }
    },
    "response": {
      "201": {
        "type": "object",
        "properties": {
          "id": { "type": "string" },
          "email": { "type": "string", "format": "email" },
          "username": { "type": "string" }
        }
      },
      "400": { "type": "object", "properties": { "error": { "type": "string" } } }
    }
  },
    "getProfileSchema": {
      "tags": ["User"],
      "response": {
        "200": {
          "description": "Successful response with user profile",
          "type": "object",
          "properties": {
            "user": {
              "type": "object",
              "properties": {
                "id": { "type": "string" },
                "email": { "type": "string", "format": "email" },
                "username": { "type": "string" },
                "isTwoFactorEnabled": { "type": "boolean" },
                "createdAt": { "type": "string", "format": "date-time" },
                "updatedAt": { "type": "string", "format": "date-time" }
              },
              "required": ["id", "email", "username", "isTwoFactorEnabled", "createdAt", "updatedAt"]
            }
          },
          "required": ["user"]
        },
        "401": { "type": "object", "properties": { "error": { "type": "string" } } },
        "404": { "type": "object", "properties": { "error": { "type": "string" } } }
      }
    },
    "getMeSchema": {
      "description": "Return the currently authenticated user's profile",
      "tags": ["User"],
      "response": {
        "200": {
          "type": "object",
          "properties": {
            "id": { "type": "string" },
            "email": { "type": "string", "format": "email" },
            "username": { "type": ["string", "null"] },
            "avatarUrl": { "type": ["string", "null"], "format": "uri" }
          }
        },
        "404": { "type": "object", "properties": { "error": { "type": "string" } } },
        "401": { "type": "object", "properties": { "error": { "type": "string" } } }
      }
    },
    "getUserSchema": {
      "description": "Fetch a public user profile by ID",
      "tags": ["User"],
      "params": {
        "type": "object",
        "properties": {
          "id": { "type": "string" }
        },
        "required": ["id"]
      },
      "response": {
        "200": {
          "type": "object",
          "properties": {
            "id": { "type": "string" },
            "username": { "type": ["string", "null"] },
            "avatarUrl": { "type": ["string", "null"], "format": "uri" }
          }
        },
        "404": { "type": "object", "properties": { "error": { "type": "string" } } },
        "401": { "type": "object", "properties": { "error": { "type": "string" } } }
      }
    },

    "updateUserSchema": {
      "description": "Update the currently authenticated user's profile",
      "tags": ["User"],
      "body": {
        "type": "object",
        "properties": {
          "username": { "type": "string", "minLength": 2 },
          "avatarUrl": { "type": "string", "format": "uri" }
        },
        "minProperties": 1
      },
      "response": {
        "200": {
          "type": "object",
          "properties": {
            "id": { "type": "string" },
            "email": { "type": "string", "format": "email" },
            "username": { "type": ["string", "null"] },
            "avatarUrl": { "type": ["string", "null"], "format": "uri" }
          }
        },
        "404": { "type": "object", "properties": { "error": { "type": "string" } } },
        "401": { "type": "object", "properties": { "error": { "type": "string" } } }
      }
    }
}